{"version":3,"sources":["../static/js/11.0b7a019f.chunk.js","pages/about/sagas.js","domain/env/sagas.js"],"names":["webpackJsonp","328","module","__webpack_exports__","__webpack_require__","_callee","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","a","wrap","_context","prev","next","Object","__WEBPACK_IMPORTED_MODULE_1_redux_saga_effects__","__WEBPACK_IMPORTED_MODULE_2_domain_env_sagas__","clearDB","type","stop","_marked","this","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","n","mark","348","version","db","__WEBPACK_IMPORTED_MODULE_4_lib_db__","sent","__WEBPACK_IMPORTED_MODULE_5__envActions__","payload","_context2","success","window","location","reload","t0","failure","err","_marked2","ensureSignIn","params","_ref","access_token","envList","_context3","__WEBPACK_IMPORTED_MODULE_3_domain_api__","auth","data","key","__WEBPACK_IMPORTED_MODULE_7__helpers__","ENV","__WEBPACK_IMPORTED_MODULE_2_react_router_redux__","pathname","search","_marked3","d"],"mappings":"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","file":"static/js/11.0b7a019f.chunk.js","sourcesContent":["webpackJsonp([11],{\n\n/***/ 328:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (immutable) */ __webpack_exports__[\"default\"] = _callee;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_redux_saga_effects__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_domain_env_sagas__ = __webpack_require__(348);\nvar _marked=/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(_callee);function _callee(){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Object(__WEBPACK_IMPORTED_MODULE_1_redux_saga_effects__[\"d\" /* fork */])(__WEBPACK_IMPORTED_MODULE_2_domain_env_sagas__[\"d\" /* version */]);case 2:_context.next=4;return Object(__WEBPACK_IMPORTED_MODULE_1_redux_saga_effects__[\"h\" /* takeLatest */])(__WEBPACK_IMPORTED_MODULE_2_domain_env_sagas__[\"a\" /* action */].clearDB.type,__WEBPACK_IMPORTED_MODULE_2_domain_env_sagas__[\"b\" /* clearDB */]);case 4:case'end':return _context.stop();}}},_marked,this);}\n\n/***/ }),\n\n/***/ 348:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = version;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = clearDB;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = ensureSignIn;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_redux_saga_effects__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react_router_redux__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_domain_api__ = __webpack_require__(68);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lib_db__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__envActions__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__envSelector__ = __webpack_require__(65);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__helpers__ = __webpack_require__(123);\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_5__envActions__; });\n/* unused harmony reexport selector */\nvar _marked=/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(version),_marked2=/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(clearDB),_marked3=/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(ensureSignIn);function version(){var db;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function version$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Object(__WEBPACK_IMPORTED_MODULE_1_redux_saga_effects__[\"b\" /* call */])(__WEBPACK_IMPORTED_MODULE_4_lib_db__[\"m\" /* version */]);case 2:db=_context.sent;_context.next=5;return Object(__WEBPACK_IMPORTED_MODULE_1_redux_saga_effects__[\"e\" /* put */])(__WEBPACK_IMPORTED_MODULE_5__envActions__[\"version\"](db));case 5:case'end':return _context.stop();}}},_marked,this);}function clearDB(){var payload;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function clearDB$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return Object(__WEBPACK_IMPORTED_MODULE_1_redux_saga_effects__[\"b\" /* call */])(__WEBPACK_IMPORTED_MODULE_4_lib_db__[\"d\" /* clean */]);case 3:payload=_context2.sent;_context2.next=6;return Object(__WEBPACK_IMPORTED_MODULE_1_redux_saga_effects__[\"e\" /* put */])({type:__WEBPACK_IMPORTED_MODULE_5__envActions__[\"clearDB\"].success,payload:payload});case 6:window.location.reload();_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2['catch'](0);_context2.next=13;return Object(__WEBPACK_IMPORTED_MODULE_1_redux_saga_effects__[\"e\" /* put */])({type:__WEBPACK_IMPORTED_MODULE_5__envActions__[\"clearDB\"].failure,err:_context2.t0});case 13:case'end':return _context2.stop();}}},_marked2,this,[[0,9]]);}function ensureSignIn(params){var _ref,access_token,envList;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function ensureSignIn$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return Object(__WEBPACK_IMPORTED_MODULE_1_redux_saga_effects__[\"b\" /* call */])(__WEBPACK_IMPORTED_MODULE_3_domain_api__[\"a\" /* default */].auth,{params:params});case 3:_ref=_context3.sent;access_token=_ref.data.access_token;envList=[{key:'user',value:{access_token:access_token}},{key:'isAuthorized',value:true}];_context3.next=8;return Object(__WEBPACK_IMPORTED_MODULE_1_redux_saga_effects__[\"e\" /* put */])({type:__WEBPACK_IMPORTED_MODULE_5__envActions__[\"signIn\"].success,payload:Object(__WEBPACK_IMPORTED_MODULE_7__helpers__[\"a\" /* envSerialize */])(envList)});case 8:_context3.next=10;return Object(__WEBPACK_IMPORTED_MODULE_1_redux_saga_effects__[\"b\" /* call */])(__WEBPACK_IMPORTED_MODULE_4_lib_db__[\"c\" /* addList */],__WEBPACK_IMPORTED_MODULE_4_lib_db__[\"a\" /* TABLE */].ENV,envList);case 10:_context3.next=12;return Object(__WEBPACK_IMPORTED_MODULE_1_redux_saga_effects__[\"e\" /* put */])(Object(__WEBPACK_IMPORTED_MODULE_2_react_router_redux__[\"d\" /* replace */])({pathname:'/',search:''}));case 12:_context3.next=18;break;case 14:_context3.prev=14;_context3.t0=_context3['catch'](0);_context3.next=18;return Object(__WEBPACK_IMPORTED_MODULE_1_redux_saga_effects__[\"e\" /* put */])({type:__WEBPACK_IMPORTED_MODULE_5__envActions__[\"signIn\"].success,err:_context3.t0});case 18:case'end':return _context3.stop();}}},_marked3,this,[[0,14]]);}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/11.0b7a019f.chunk.js","import { fork, takeLatest } from 'redux-saga/effects';\nimport * as Env from 'domain/env/sagas';\n\nexport default function* () {\n  yield fork(Env.version);\n  yield takeLatest(Env.action.clearDB.type, Env.clearDB);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/about/sagas.js","import { call, put } from 'redux-saga/effects';\nimport { replace } from 'react-router-redux';\nimport Api from 'domain/api';\nimport * as idb from 'lib/db';\nimport * as action from './envActions';\nimport * as selector from './envSelector';\nimport { envSerialize } from './helpers';\nexport { action, selector };\n\nexport function* version() {\n  const db = yield call(idb.version);\n  yield put(action.version(db));\n}\n\nexport function* clearDB() {\n  try {\n    const payload = yield call(idb.clean);\n    yield put({\n      type: action.clearDB.success,\n      payload,\n    });\n    window.location.reload();\n  } catch (err) {\n    yield put({\n      type: action.clearDB.failure,\n      err,\n    });\n  }\n}\n\nexport function* ensureSignIn(params) {\n  try {\n\n    const { data: { access_token } } = yield call(Api.auth, { params });\n\n    const envList = [\n      {\n        key: 'user', value: {\n          access_token,\n        },\n      }, {\n        key: 'isAuthorized',\n        value: true,\n      },\n    ];\n\n    yield put({\n      type: action.signIn.success,\n      payload: envSerialize(envList),\n    });\n\n    yield call(idb.addList, idb.TABLE.ENV, envList);\n\n    yield put(\n      replace({\n        pathname: '/',\n        search: '',\n      }),\n    );\n\n  } catch (err) {\n    yield put({\n      type: action.signIn.success,\n      err,\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/domain/env/sagas.js"],"sourceRoot":""}